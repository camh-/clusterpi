bootdelay=1

bootmode=fat
roottype=mmc

kernelfile=zImage
fdtfile=board.dtb
nfs_root_path=/srv/nfs/root/clusterpi
nfs_root_dir=root
serverip=10.100.110.1

init=/sbin/init
console=ttyS0
baudrate=115200

base_args=setenv bootargs "earlyprintk console=${console},${baudrate} rootwait"
init_args=setenv bootargs "${bootargs} init=${init}"

tftp_init=usb start
tftp_load_kernel=dhcp ${kernel_addr_r} ${kernelfile}; tftp ${fdt_addr_r} ${fdtfile}
fat_init=mmc dev 0
fat_load_kernel=fatload mmc 0:1 ${kernel_addr_r} ${kernelfile}; fatload mmc 0:1 ${fdt_addr_r} ${fdtfile}

nfs_opts=nfsvers=3

nfs_args=setenv bootargs "${bootargs} ip=dhcp root=/dev/nfs nfsroot=${serverip}:${nfs_root_path}/${nfs_root_dir},${nfs_opts}"
mmc_args=setenv bootargs "${bootargs} root=/dev/mmcblk0p2"

# Generic boot starts here.
bootcmd=run boot
boot=run load_images set_args boot_kernel
load_images=run ${bootmode}_init ${bootmode}_load_kernel
set_args=run base_args init_args ${roottype}_args
boot_kernel=bootz ${kernel_addr_r} - ${fdt_addr_r}
